<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="print_tightening_result_report" model="ir.actions.report">
        <field name="model">onesphere.tightening.result</field>
        <field name="name">Tightening Result Report</field>
        <field name="report_name">onesphere_assembly_industry.tightening_result_report_template</field>
        <field name="report_type">qweb-html</field>
    </record>

    <template id="tightening_result_report_template">
        <t t-name="tightening_result_report_template">
            <t t-call="web.html_container">
            <t t-call="web.external_layout">
                <style>
                    .row{
                    margin: 1px auto -1px auto;
                    display: -webkit-box;
                    -webkit-box-orient: horizontal;
                    text-align: center;
                    }
                    .child{
                    -webkit-box-flex: 1;
                    }
                    .row1{
                    margin: 1px auto -1px auto;
                    display: -webkit-box;
                    -webkit-box-orient: horizontal;
                    }
                </style>
                <div class="page">
                    <title align="center" name="test">拧紧结果报告</title>
                    <br/>
                    <p/>
                    <h4 style="color: #000000">追溯码: <t t-esc="track_no"/></h4>
                    <p/>
                    <br/>
                    <div class="row">
                        <div class="child">总数</div>
                        <div class="child">合格数 (比率)</div>
                        <div class="child">异常数 (比率)</div>
                    </div>
                    <div class="row">
                        <div class="child"><t t-esc="count"/></div>
                        <div class="child"><t t-esc="ok_count"/> (<t t-esc="ok_percent"/>)</div>
                        <div class="child"><t t-esc="nok_count"/> (<t t-esc="nok_percent"/>)</div>
                    </div>
                    <br/>
                    <br/>
                    <div class="row">
                        <div class="child">螺栓数</div>
                        <div class="child">一次合格数 (比率)</div>
                        <div class="child">最终合格数 (比率)</div>
                    </div>
                    <div class="row">
                        <div class="child"><t t-esc="bolt_count"/></div>
                        <div class="child"><t t-esc="first_ok_count"/> (<t t-esc="first_ok_percent"/>)</div>
                        <div class="child"><t t-esc="final_ok_count"/> (<t t-esc="final_ok_percent"/>)</div>
                    </div>
                    <br/>
                    <br/>
                    <br/>
                    <br/>
                    <p/>
                    <t t-foreach="results" t-as="bolt_result">
                        <div class="row1">
                            <div class="child">螺栓: <t t-esc="bolt_result['bolt_name']"/></div>
                            <div class="child">结果数: <t t-esc="bolt_result['count']"/></div>
                            <div class="child">最终结果: <t t-esc="bolt_result['final_result']"/></div>
                        </div>
                        <table class="table table-condensed" style="font-size:16px; text-align: center" boder="1">
                            <thead>
                                <tr>
                                    <th>拧紧结果</th>
                                    <th>程序号</th>
                                    <th>扭矩(NM)</th>
                                    <th>角度(Deg)</th>
                                    <th>拧紧时间</th>
                                    <th>工位</th>
                                    <th>设备序列号</th>
                                    <th>错误信息</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr t-foreach="bolt_result['results']" t-as="line">
                                    <t t-if="line[0]=='ok'">
                                        <td style="background-color: #C8E6C9;">
                                            <span style="color:#256029">OK</span>
                                        </td>
                                    </t>
                                    <t t-elif="line[0]=='nok'">
                                        <td style="background-color: #FFCDD2">
                                            <span style="color:#C63737">NOK</span>
                                        </td>
                                    </t>
                                    <t t-else="">
                                        <td style="background-color: #D3D1D1">
                                            <span t-esc="line[0].upper()"/>
                                        </td>
                                    </t>
                                    <td><span t-esc="line[1]"/></td>
                                    <td name="torque"><span t-esc="line[2]"/></td>
                                    <td name="angle"><span t-esc="line[3]"/></td>
                                    <td><span t-esc="line[4]"/></td>
                                    <td><span t-esc="line[5]"/></td>
                                    <td><span t-esc="line[6]"/></td>
                                    <td><span t-esc="line[7]"/></td>
                                </tr>
                            </tbody>
                        </table>
                        <br/>
                        <br/>
                    </t>
                </div>
            </t>
        </t>
        </t>
    </template>

</odoo>